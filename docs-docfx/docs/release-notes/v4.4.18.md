# v4.4.18

## Common

> [!NOTE]
> Security update: Mitigate a high-severity vulnerability by upgrading certain Agents.

| Change Type | Description |
|-------------|-------------|
| Security | We've replaced the deprecated System.Data.SqlClient library with Microsoft.Data.SqlClient, which is the recommended SQL Server data provider for all .NET applications. This update mitigates the risk of security vulnerabilities in the deprecated library while providing improved security, performance, and ongoing support. Refer to Integrations below for affected Agents. |
| Security | This release focuses on enhancing platform security and automated test coverage. Key improvements include endpoint authorization updates and significant platform engineering work to improve system stability and performance. |
| Fix | *When upgrading using an ARM Template, there is a hard failure on the Data Stream Designer (DS) database upgrade. Later, I cannot retrieve the DS values needed to configure a Stream Host.*<br>Fixed the Azure ARM Template not populating Data Stream/Stream Host Environment Variables. |
| Fix | *When installing in AWS, there is an IIS error when I log into XMPro.*<br>AWS .ebextensions script assigns iis_user read access to the certificate used by Subscription Manager. |

## Integrations

| Change Type | Name | Description |
|-------------|------|-------------|
| New | [HiveMQ Listener v1.00](https://xmpro.gitbook.io/hivemq/)<br>[HiveMQ Action Agent v1.00](https://xmpro.gitbook.io/hivemq/) | HiveMQ ensures efficient real-time data exchange in environments with limited bandwidth or high network traffic. |
| Security | [Data Streams Connector v2.01](https://xmpro.gitbook.io/data-streams-connector/)<br>[Read Action Request v2.07](https://xmpro.gitbook.io/action-request-agents/)<br>[Read Recommendation v3.01](https://xmpro.gitbook.io/read-recommendation/)<br>[Resolve Recommendation v2.48](https://xmpro.gitbook.io/resolve-recommendation/)<br>[Run Recommendation v3.04](https://xmpro.gitbook.io/run-recommendation)<br>[Update Recommendation v3.01](https://xmpro.gitbook.io/update-recommendation/)<br>[Close Action Request v1.02](https://xmpro.gitbook.io/action-request-agents/) | Replaced deprecated System.Data.SqlClient library to avoid security vulnerabilities. |

The following Agents were repackaged to translate the configuration properties:

| Change Type | Name |
|-------------|------|
| Translation | [Azure SQL Listener v5.51<br>Azure SQL Context Provider v5.51<br>Azure SQL Action Agent v5.51](https://xmpro.gitbook.io/azure-sql) |
| Translation | [Boon Amber Action Agent v1.01](https://xmpro.gitbook.io/boon-amber/) |
| Translation | [Convert Flow Units Function v1.07](https://xmpro.gitbook.io/convert-flow-units/) |
| Translation | [Coupa Context Provider v1.01<br>Coupa Action Agent v2.01](https://xmpro.gitbook.io/coupa) |
| Translation | [CRC16 Function v1.02](https://xmpro.gitbook.io/crc16/) |
| Translation | [CSV Listener v3.52](https://xmpro.gitbook.io/csv/)<br>[CSV Context Provider v1.13](https://xmpro.gitbook.io/csv/)<br>[CSV Writer (Action Agent) v1.02](https://xmpro.gitbook.io/csv/) |
| Translation | [Erbessd Context Provider v2.06](https://xmpro.gitbook.io/erbessd/)<br>[Erbessd Listener v3.41](https://xmpro.gitbook.io/erbessd/) |
| Translation | [FFT Function v1.32](https://xmpro.gitbook.io/fft/) |
| Translation | [FinOps Action Agent v6.83<br>FinOps Context Provider v5.63](https://xmpro.gitbook.io/finops/) |
| Translation | [Fixed Width File Reader Action Agent v1.01](https://xmpro.gitbook.io/fixed-width-file-reader/) |
| Translation | [Goal Seek Function v1.41](https://xmpro.gitbook.io/goal-seek/) |
| Translation | [ifm Listener v1.03](https://xmpro.gitbook.io/ifm/) |
| Translation | [InfluxDB Listener v1.26<br>InfluxDB Context Provider v1.03<br>InfluxDB Action Agent v.1.44](https://xmpro.gitbook.io/influxdb/) |
| Translation | [iPOS Action Agent v1.81](https://xmpro.gitbook.io/ipos/) |
| Translation | [JSON File Reader Context Provider v1.22<br>JSON Serializer Transformation v1.12<br>JSON Deserializer Transformation v1.32](https://xmpro.gitbook.io/json/) |
| Translation | [Linear Interpolation Function v1.13](https://xmpro.gitbook.io/linear-interpolation/) |
| Translation | [MLflow AI & ML Agent v1.08](https://xmpro.gitbook.io/mlflow/) |
| Translation | [MQTT Listener v3.05<br>MQTT Action Agent v3.05](https://xmpro.gitbook.io/mqtt/) |
| Translation | [Nanoprecise Listener v2.04<br>Nanoprecise Context Provider v2.05](https://xmpro.gitbook.io/nanoprecise/)<br>[Nanoprecise Data Reader v1.02<br>Nanoprecise Action Agent v2.04](https://xmpro.gitbook.io/nanoprecise/) |
| Translation | [OData Context Provider v1.33<br>OData Action Agent v1.63](https://xmpro.gitbook.io/odata/) |
| Translation | [ODBC Listener v1.12<br>ODBC Context Provider v1.03](https://xmpro.gitbook.io/odbc/) |
| Translation | [OSIsoft PI Listener v4.05<br>OSIsoft PI Context Provider v4.31<br>OSIsoft PI Action Agent v3.11](https://xmpro.gitbook.io/osisoft-pi) |
| Translation | [PDF Converter Action Agent v5.11](https://xmpro.gitbook.io/pdf-converter/) |
| Translation | [Python AI & ML Agent v1.66](https://xmpro.gitbook.io/python/) |
| Translation | [Read Recommendation v3.01](https://xmpro.gitbook.io/read-recommendation/)<br>[Resolve Recommendation v2.48](https://xmpro.gitbook.io/resolve-recommendation/)<br>[Run Recommendation v3.04](https://xmpro.gitbook.io/run-recommendation)<br>[Update Recommendation v3.01](https://xmpro.gitbook.io/update-recommendation/)<br>[Close Action Request v1.02](https://xmpro.gitbook.io/action-request-agents/)<br>[Read Action Request v2.07](https://xmpro.gitbook.io/action-request-agents/) |
| Translation | [Rest API Context Provider v3.14<br>Rest API Action Agent v3.39](https://xmpro.gitbook.io/rest-api/) |
| Translation | [Rounding Function v1.03](https://xmpro.gitbook.io/rounding/) |
| Translation | [RScript AI & ML Agent v3.08](https://xmpro.gitbook.io/rscript/) |
| Translation | [Salesforce Listener Agent v1.21<br>Salesforce Context Provider v3.01<br>Salesforce Action Agent v1.18](https://xmpro.gitbook.io/salesforce/) |
| Translation | [SAP Context Provider v5.21<br>SAP Action Agent v6.09](https://xmpro.gitbook.io/sap) |
| Translation | [SAP HANA Context Provider v2.23](https://xmpro.gitbook.io/sap-hana/)<br>[SAP HANA Action Agent v2.23](https://xmpro.gitbook.io/sap-hana/) |
| Translation | [Signal Filter v4.03](https://xmpro.gitbook.io/signal-filter/) |
| Translation | [Sparkplug B Listener v2.01<br>Sparkplug B Action Agent v2.01](https://xmpro.gitbook.io/sparkplug-b/) |
| Translation | [SQL Server Listener v5.51<br>SQL Server Context Provider v5.51<br>SQL Server Action Agent v5.51](https://xmpro.gitbook.io/sql-server) |
| Translation | [Streaming Data Platform Listener v1.01<br>Streaming Data Platform Context Provider v1.01](https://xmpro.gitbook.io/streaming-data-platform/) |
| Translation | [Tango Listener v1.25<br>Tango Context Provider v1.16](https://xmpro.gitbook.io/tango/) |
| Translation | [Telit deviceWise Listener v1.22<br>Telit deviceWise Context Provider v1.01<br>Telit deviceWise Action Agent v1.11](https://xmpro.gitbook.io/telit-devicewise/) |
| Translation | [Telit MQTT Listener v2.01<br>Telit MQTT Action Agent v2.01](https://xmpro.gitbook.io/telit-mqtt/) |
| Translation | [Telit OPC UA Listener v1.01<br>Telit OPC UA Action Agent v1.01](https://xmpro.gitbook.io/telit-opc-ua/) |
| Translation | [WebScraper Context Provider v1.02](https://xmpro.gitbook.io/webscraper/) |
| Translation | [XML File Reader Action Agent v1.19](https://xmpro.gitbook.io/xml-file-reader/) |
| Translation | [XMQ Listener v1.05<br>XMQ Action Agent v1.05](https://xmpro.gitbook.io/xmq/) |

The following Connectors were repackaged to translate the configuration properties:

| Change Type | Name |
|-------------|------|
| Translation | [Azure Data Explorer Connector v1.98](https://xmpro.gitbook.io/azure-data-explorer-connector/) |
| Translation | [Azure Digital Twin Connector v1.11](https://xmpro.gitbook.io/azure-digital-twin-connector/) |
| Translation | [Azure SQL Connector v2.01](https://xmpro.gitbook.io/azure-sql-connector/) |
| Translation | [Data Streams Connector v2.01](https://xmpro.gitbook.io/data-streams-connector/) |
| Translation | [Erbessd Connector v3.01](https://xmpro.gitbook.io/erbessd-connector/) |
| Translation | [HTTP Connector v1.01](https://xmpro.gitbook.io/http-connector/) |
| Translation | [JSON Connector v1.01](https://xmpro.gitbook.io/json-connector/) |
| Translation | [Nanoprecise Connector v1.03](https://xmpro.gitbook.io/nanoprecise-connector/) |
| Translation | [Neo4j Connector v1.03](https://xmpro.gitbook.io/neo4j-connector/) |
| Translation | [OSIsoft PI Connector v2.27](https://xmpro.gitbook.io/osisoft-pi-connector/) |
| Translation | [OSIsoft PI Histogram Connector v1.11](https://xmpro.gitbook.io/osisoft-pi-histogram-connector/) |
| Translation | [REST API Connector v1.02](https://xmpro.gitbook.io/rest-api-connector/) |
| Translation | [Snowflake Connector v1.01](https://xmpro.gitbook.io/snowflake-connector/) |
| Translation | [SQL Server Connector v2.01](https://xmpro.gitbook.io/sql-server-connector/) |
| Translation | [TSA Azure Data Explorer Connector v1.11](https://xmpro.gitbook.io/tsa-azure-data-explorer-connector/) |
| Translation | [TSA SQL Connector v2.01](https://xmpro.gitbook.io/tsa-sql-connector/) |

## App Designer

| Change Type | Description |
|-------------|-------------|
| Enhancement | We've made security and usability enhancements to the [Metablock](../blocks-toolbox/advanced/metablock.md):<br><br>**Intercept encrypted server variables when used inside a WebSocket.**<br>Requests are proxied so that credentials inside the Metablock are not exposed when sending messages via WebSockets. <br>You can now authenticate securely and simply using encrypted server variable [value mappings](../blocks-toolbox/advanced/metablock.md#value-mapping) in a WebSocket/MQTT message.<br><br>**Allowed Downloads** [**security feature**](../blocks-toolbox/advanced/metablock.md#security-features).<br>We've enabled this security feature so that you can build a Metablock that includes file download functionality.<br><br>**Utilize multiple script files using App Files.**<br>Although the Metablock supports a single HTML, CSS, and JavaScript file, you can now reference App Files as a source for additional resource files. This means you can have [multiple files](../blocks-toolbox/advanced/metablock.md#how-can-i-load-multiple-script-files) rather than consolidating into a single file. |
| Fix | *I was able to mark an Alert as resolved, even though there was a required Form field.*<br>Resolve [Alert Action](../blocks-toolbox/recommendations/alert-action.md) Block respect required Form fields as expected (i.e. a False Positive can be used without filling in required Form fields. |
| Fix | *I configured a Time Series Analytics Block with a range of 12 hours, initial selection of 3 hours. When I launch the App, the range is 3 hours and the initial selection is 3 minutes.*<br>An error introduced in v4.4.17 has been corrected and the [Time Series Analysis](../blocks-toolbox/visualizations/time-series-analysis.md) Block filter works as expected. |

## Data Stream Designer

| Change Type | Description |
|-------------|-------------|
| Enhancement | [Favorite](https://documentation.xmpro.com/how-tos/manage-landing-pages#favorite-a-block) your commonly used Agents to visually identify them with a star. In future, we'll add a new Favorites category so you can access them more easily. |

## NuGet Packages

### Common

| Change Type | Description |
|-------------|-------------|
| Enhancement | Modernize and enable publishing of NuGet packages. This enriches NuGet package metadata and introduces SourceLink capabilities to enhance the Developer experience. |
| Maintenance | Implement [EditorConfig](https://lng-consultancy.com/unleashing-the-power-of-editorconfig-in-visual-studio/) and apply Whitespace and Usings rules, ensuring uniformity in internal coding style. |

### Agent Development

#### XMPro.XMIoT.Framework

| Change Type | Description |
|-------------|-------------|
| Security | Updated third-party dependencies to maintain optimal security standards. |
| Enhancement | Support Agent property translations with a new property, TranslationMap. |
| Enhancement | Support a zipped file to be packaged in an Agent. |
| Enhancement | When an Agent and the Stream Host supply the same assembly, the correct one is selected. In addition, detailed debug information is now logged when loading agent assemblies to better troubleshoot Agent and Stream Host issues. There is a check for certain agent assembly loading conditions, which will be visible in the Data Stream log viewer. |
| Enhancement | The [IPollingAgent](https://documentation.xmpro.com/how-tos/agents/building-agents#ipolling-agent) interface was changed from required to recommended with the addition of a RequiresPolling property. This gives greater flexibility as typically non-polling agents can also poll. |
| Maintenance | Remove redundant *Hybrid* and *Cloud* Agent types - only Edge is supported. |
| Maintenance | Remove redundant Java references - only Agents written in C# or using the Meta Agent are supported. |
| Maintenance | Remove SCC references from csproj files - redundant in current source control. |

### Connector Development

#### XMPro.Integration.Framework

| Change Type | Description |
|-------------|-------------|
| Enhancement | Added parameters to the Connector's [Subscribe](https://documentation.xmpro.com/how-tos/connectors/building-connectors#subscribe) method, used to implement live updates on [data sources](https://documentation.xmpro.com/concepts/application/data-integration#data-source).<br>Connector creators can implement the same pre-defined filtering and sorting applied when an App Page is refreshed. |
| Enhancement | The new [ITSCConnector](https://documentation.xmpro.com/how-tos/connectors/building-connectors#itscconnector) interface instructs the Time Series Chart to use optimized client-side querying. Use it when building new TSC Connectors that pre-process large volumes of data and return it in buckets.<br><br>Later, the [ITSAConnector](https://documentation.xmpro.com/how-tos/connectors/building-connectors#itsaconnector) interface was added (to reflect the [Time Series Analysis](https://documentation.xmpro.com/blocks-toolbox/visualizations/time-series-analysis) Block renamed in v4.4.9) and the ITSCConnector interface deprecated. |

#### XMPro.Integration.Helpers

No additional changes.

#### XMPro.Integration.Settings

| Change Type | Description |
|-------------|-------------|
| Enhancement | Support Agent property translations with a new property, TranslationMap. |
