<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Cache Busting Solution for GitHub Pages | XMPro </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Cache Busting Solution for GitHub Pages | XMPro ">
      
      
      <link rel="icon" href="favicon.ico">
      <link rel="stylesheet" href="public/docfx.min.css">
      <link rel="stylesheet" href="public/main.css">
      <meta name="docfx:navrel" content="toc.html">
      <meta name="docfx:tocrel" content="toc.html">
      
      <meta name="docfx:rel" content="">
      
      
      <meta name="docfx:docurl" content="https://github.com/XMPro/public-docs-pages/blob/feature/skip-docs-folder/docs-docfx/cache-busting-readme.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="index.html">
            <img id="logo" class="svg" src="logo.svg" alt="XMPro">
            XMPro
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">

      <div class="content">
        <div class="actionbar">

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="cache-busting-solution-for-github-pages">Cache Busting Solution for GitHub Pages</h1>

<p>This document explains the cache busting solution implemented for the XMPro documentation site hosted on GitHub Pages.</p>
<h2 id="problem">Problem</h2>
<p>GitHub Pages serves static content with default cache headers that can cause browsers to cache HTML pages and other resources. This can lead to users not seeing the latest changes unless they perform a hard refresh or open the site in a private/incognito window.</p>
<h2 id="solution">Solution</h2>
<p>The solution implements multiple layers of cache busting to ensure users always get the latest content:</p>
<h3 id="1-cache-control-meta-tags">1. Cache Control Meta Tags</h3>
<p>The HTML pages include the following meta tags to prevent caching:</p>
<pre><code class="lang-html">&lt;meta http-equiv=&quot;Cache-Control&quot; content=&quot;no-cache, no-store, must-revalidate&quot;&gt;
&lt;meta http-equiv=&quot;Pragma&quot; content=&quot;no-cache&quot;&gt;
&lt;meta http-equiv=&quot;Expires&quot; content=&quot;0&quot;&gt;
</code></pre>
<h3 id="2-service-worker">2. Service Worker</h3>
<p>A service worker (<code>service-worker.js</code>) is implemented to control caching behavior:</p>
<ul>
<li>HTML files are always fetched from the network first, with cache as a fallback</li>
<li>Other resources use a cache-first strategy for better performance</li>
<li>The service worker is updated with each build, forcing a refresh of the cache</li>
<li>The service worker uses <code>skipWaiting()</code> and <code>clients.claim()</code> to take control immediately</li>
</ul>
<h3 id="3-version-tracking">3. Version Tracking</h3>
<p>A version tracking system is implemented to detect when new content is available:</p>
<ul>
<li><code>version.js</code> contains a timestamp that is updated with each build</li>
<li><code>version-check.js</code> periodically checks for a new version and reloads the page if detected</li>
</ul>
<h2 id="implementation-details">Implementation Details</h2>
<h3 id="custom-docfx-template">Custom DocFX Template</h3>
<p>A custom DocFX template is used to add the cache control meta tags and scripts to the HTML pages.</p>
<h3 id="github-workflow">GitHub Workflow</h3>
<p>The GitHub workflow has been updated to:</p>
<ol>
<li>Generate a new timestamp for each build</li>
<li>Update the <code>version.js</code> file with the new timestamp</li>
<li>Build the site with DocFX</li>
<li>Deploy the site to GitHub Pages</li>
</ol>
<h3 id="files-addedmodified">Files Added/Modified</h3>
<ul>
<li><code>templates/modern/partials/head.tmpl.partial</code> - Added cache control meta tags and scripts</li>
<li><code>service-worker.js</code> - Service worker implementation for cache control</li>
<li><code>register-sw.js</code> - Script to register the service worker</li>
<li><code>version.js</code> - Contains the build timestamp</li>
<li><code>version-check.js</code> - Checks for new versions and reloads the page</li>
<li><code>docfx.json</code> - Updated to include the new files</li>
<li><code>.github/workflows/docfx.yml</code> - Updated to generate a new timestamp with each build</li>
</ul>
<h2 id="testing">Testing</h2>
<p>To test if the cache busting is working:</p>
<ol>
<li>Visit the site in a normal browser window</li>
<li>Make changes to the site and deploy them</li>
<li>Wait for the deployment to complete</li>
<li>The page should automatically reload with the new content within 5 minutes</li>
<li>Alternatively, you can manually refresh the page to see the changes immediately</li>
</ol>
<h2 id="troubleshooting">Troubleshooting</h2>
<p>If you're still experiencing caching issues:</p>
<ol>
<li>Open the browser's developer tools</li>
<li>Go to the Application tab</li>
<li>Check the Service Worker section to ensure it's active</li>
<li>Check the Cache Storage section to see what's being cached</li>
<li>Try clearing the browser cache manually</li>
</ol>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/XMPro/public-docs-pages/blob/feature/skip-docs-folder/docs-docfx/cache-busting-readme.md/#L1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made with <a href="https://dotnet.github.io/docfx">docfx</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>
